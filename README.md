# InfographicsGen

Внутренний инструмент для генерации продающей инфографики товаров для маркетплейсов Wildberries и Ozon.

## Возможности

### Генерация инфографики с AI
- **Главное фото** — продающее изображение товара для первого слота
- **Карусель** — до 30 слайдов с УТП, характеристиками, сценариями использования
- **Рич-контент** — блоки для раздела "О товаре" с SEO-оптимизацией

### Как это работает
1. Загружаешь фото товара без фона (PNG)
2. Добавляешь референсы стиля (примеры инфографики конкурентов)
3. AI (Nano Banana Pro) генерирует продающее изображение, комбинируя твой товар с профессиональным окружением

### Интеграция с Wildberries
- **Парсинг карточки товара** — вставляешь ссылку, система извлекает:
  - Ключевые слова (поисковые запросы)
  - Название, описание, характеристики
  - Отзывы покупателей (боли, преимущества)
  - Данные о конкурентах в категории
- **Аналитика** — автоматический сбор метрик: просмотры, клики, корзина, заказы

### A/B тестирование
- Создавай тесты с 2-4 вариантами изображений
- Система автоматически собирает статистику каждые 6 часов
- Дашборд показывает сравнение метрик и статистическую значимость
- Полуавтоматические рекомендации: система подсказывает когда данных достаточно для вывода

### SEO-оптимизированный рич-контент
- Готовые шаблоны структуры (стандартный, премиум, сравнение)
- AI генерирует тексты с использованием ключевых слов
- Анализ покрытия SEO-ключей в контенте

## Технологии

| Компонент | Технология |
|-----------|------------|
| Frontend | Next.js 15, React 19, TypeScript |
| UI | Tailwind CSS, shadcn/ui |
| Редактор изображений | Konva.js |
| Backend | Convex |
| AI изображения | Nano Banana Pro (Gemini 3 Pro Image) via fal.ai |
| AI тексты | OpenAI GPT-4o |
| Хранение файлов | Cloudflare R2 |
| API маркетплейсов | Wildberries API |

## Структура проекта

```
infographics-gen/
├── app/                      # Next.js App Router
│   ├── page.tsx              # Список проектов
│   └── projects/
│       ├── [id]/
│       │   ├── page.tsx      # Обзор проекта
│       │   ├── generate/     # Генерация изображений
│       │   ├── rich/         # Рич-контент
│       │   ├── editor/       # Canvas-редактор
│       │   └── ab-tests/     # A/B тесты
│       └── new/              # Создание проекта
│
├── components/
│   ├── ui/                   # shadcn компоненты
│   ├── projects/             # Компоненты проектов
│   ├── generator/            # UI генерации
│   ├── editor/               # Konva редактор
│   ├── rich-content/         # Билдер рич-контента
│   └── analytics/            # Дашборды
│
├── convex/
│   ├── schema.ts             # Схема данных
│   ├── projects.ts           # CRUD проектов
│   ├── generations.ts        # Логика генерации
│   ├── abTests.ts            # A/B тесты
│   ├── wb/                   # WB API интеграция
│   └── ai/                   # AI сервисы
│
├── lib/                      # Утилиты
└── docs/
    └── plans/                # Дизайн-документы
```

## Workflow

```
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│  Создать проект │────▶│ Загрузить фото  │────▶│   Генерация     │
│  + ссылка WB    │     │ товара + стиль  │     │   с AI          │
└─────────────────┘     └─────────────────┘     └─────────────────┘
                                                        │
        ┌───────────────────────────────────────────────┘
        ▼
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│  Редактирование │────▶│   A/B тест      │────▶│    Анализ       │
│  (опционально)  │     │   вариантов     │     │    и выбор      │
└─────────────────┘     └─────────────────┘     └─────────────────┘
```

### Пошаговый процесс

**1. Создание проекта**
- Вводишь название товара
- Вставляешь ссылку на карточку WB (опционально)
- Система парсит ключевые слова, отзывы, характеристики

**2. Загрузка материалов**
- Фото товара без фона (PNG) — обязательно
- Референсы стиля — 1-4 примера желаемой инфографики

**3. Генерация**
- Выбираешь тип: главное фото / карусель / рич-контент
- Настраиваешь: слот, акцент на УТП, количество текста
- AI генерирует изображение
- Принимаешь, регенерируешь или редактируешь

**4. A/B тестирование**
- Выбираешь 2-4 варианта для теста
- Устанавливаешь вариант A в ЛК Wildberries
- Система собирает аналитику автоматически
- Смотришь дашборд, переключаешь варианты по рекомендации

## Модель данных

### Projects
Проекты товаров — основная сущность для организации работы.

### ProductData
Распарсенные данные с WB: ключевые слова, характеристики, отзывы, конкуренты.

### Assets
Загруженные файлы: фото товара, референсы стиля, сгенерированные изображения.

### Generations
История генераций с промптами и результатами.

### ABTests
Тесты с вариантами и статусом.

### Analytics
Снэпшоты метрик с WB для каждого варианта теста.

## Интеграции

### Wildberries API
```
Парсинг:
- /content/v2/get/cards/list — данные карточки
- /api/v2/search-report/product/search-texts — ключевые слова
- /api/v2/search-report/product/orders — заказы по ключам

Аналитика:
- /api/analytics/v3/sales-funnel/products — воронка продаж
- /api/analytics/v3/sales-funnel/products/history — история по дням
```

### Nano Banana Pro (fal.ai)
Генерация изображений с поддержкой:
- Референсных изображений (до 4 штук)
- Переноса стиля
- Текста на изображениях
- Разрешения до 4K

### OpenAI GPT-4o
Генерация SEO-оптимизированных текстов для рич-контента.

## Развитие

### MVP
- [x] Дизайн-документ
- [ ] Базовая структура проекта
- [ ] CRUD проектов
- [ ] Парсинг карточки WB
- [ ] Генерация изображений
- [ ] Canvas-редактор
- [ ] Рич-контент
- [ ] A/B тестирование

### Будущее
- Видео-превью (слайдшоу из изображений)
- AI-генерация видео
- Интеграция с Ozon API
- Автозагрузка в ЛК WB
- Библиотека готовых стилей

## Запуск

```bash
# Установка зависимостей
npm install

# Запуск Convex
npx convex dev

# Запуск Next.js
npm run dev
```

## Переменные окружения

```env
# Convex
CONVEX_DEPLOYMENT=
NEXT_PUBLIC_CONVEX_URL=

# AI
FAL_KEY=
OPENAI_API_KEY=

# Wildberries
WB_API_TOKEN=

# Cloudflare R2
R2_ACCESS_KEY_ID=
R2_SECRET_ACCESS_KEY=
R2_BUCKET=
R2_ENDPOINT=
```

## Лицензия

Внутренний проект. Все права защищены.
